(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{55:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c(25),s=c.n(n),i=c(4),r=c(11),j=c(31),o=c(22),l=c(13),d=(c(55),c(2)),b=function(e){var t=e.products;return Object(d.jsx)(d.Fragment,{children:t.map((function(e){return Object(d.jsx)(o.a,{sm:6,md:4,lg:4,xxl:3,children:Object(d.jsxs)("div",{className:"itemContainer",children:[Object(d.jsx)("div",{className:"itemContainer__image",style:{backgroundImage:"url(/".concat(e.pictureUrl,")")}}),Object(d.jsxs)("div",{className:"itemContainer__info",children:[Object(d.jsx)("span",{className:"item__price",children:(t=e.price,"$ "+t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."))}),Object(d.jsx)("h2",{className:"item__name",children:e.title}),Object(d.jsx)(l.b,{to:"/item/".concat(e.id),style:{textDecoration:"none"},children:Object(d.jsx)("button",{className:"item__detalle",children:"Ver detalle"})})]})]})},e.id);var t}))})},u=(c(64),c(29)),m=function(e){var t=e.products,c=e.isLoading;return Object(d.jsx)(j.a,{className:"item-list gy-4",children:c?Object(d.jsx)(u.a,{animation:"border",className:"spinner",role:"status",variant:"secondary",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(d.jsx)(b,{products:t})})},O=(c(65),c(24)),h=c(10),x=c(43),p=(c(77),x.a.initializeApp({apiKey:"AIzaSyCeyva2aNuZH6RMYP4UQiApaJqTHIZuZ4I",authDomain:"proyecto-react-d4cf2.firebaseapp.com",projectId:"proyecto-react-d4cf2",storageBucket:"proyecto-react-d4cf2.appspot.com",messagingSenderId:"350463124580",appId:"1:350463124580:web:2a68250cfd441496c6ab71"})),f=x.a.firestore(p),v=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!0),j=Object(r.a)(s,2),o=j[0],l=j[1],b=Object(h.f)().id;return Object(a.useEffect)((function(){var e=f.collection("productos"),t=[];b?t=e.where("categoryId","==",parseInt(b)).get():t=e.get();t.then((function(e){var t=[];e.forEach((function(e){var c=e.id,a=e.data(),n=Object(i.a)({id:c},a);t.push(n)})),n(t),l(!1)}),[b])})),Object(d.jsx)(O.a,{className:"mt-5 itemListContainer",children:Object(d.jsx)(m,{products:c,isLoading:o})})},g=c(47),N=c(0),_=(c(67),c(46)),y=c(36),C=Object(a.createContext)(),k=C.Provider,I=function(e){var t=e.defaultValue,c=void 0===t?[]:t,n=e.children,s=Object(a.useState)(c),i=Object(r.a)(s,2),j=i[0],o=i[1],l=function(e){return j.find((function(t){return t.item.id===e}))};return Object(d.jsx)(k,{value:{cart:j,addItem:function(e,t){if(l(e.id)){var c,a=Object(y.a)(j),n=Object(_.a)(a);try{for(n.s();!(c=n.n()).done;){var s=c.value;s.item.id===e.id&&(s.quantity=s.quantity+t)}}catch(i){n.e(i)}finally{n.f()}o(a)}else o([].concat(Object(y.a)(j),[{item:e,quantity:t}]))},removeItem:function(e){var t=Object(y.a)(j).filter((function(t){return t.item.id!==e}));o(t)},getTotal:function(){var e=0;return j.length>0&&j.forEach((function(t){e+=t.item.price*t.quantity})),e},clear:function(){o([])}},children:n})},S=C,q=function(){var e=Object(a.useContext)(S).cart,t=Object(a.useState)(0),c=Object(r.a)(t,2),n=c[0],s=c[1];return Object(a.useEffect)((function(){var t=e.reduce((function(e,t){return e+t.quantity}),0);s(t)}),[e]),Object(d.jsx)(l.b,{to:"/cart",className:"cartWidgetContainer",children:Object(d.jsx)(N.b.Provider,{value:{size:"1.3em"},children:Object(d.jsxs)("div",{className:"cartWidget",children:[Object(d.jsx)(g.a,{}),n>0?Object(d.jsxs)("span",{children:[n," items"]}):Object(d.jsx)(d.Fragment,{})]})})})},F=(c(68),function(){return Object(d.jsxs)("nav",{children:[Object(d.jsx)("div",{className:"nav__brand",children:Object(d.jsx)(l.c,{to:"/",children:"WatchWorld"})}),Object(d.jsxs)("div",{className:"nav__links",children:[Object(d.jsx)(l.c,{to:"/category/2",className:"nav__link",activeClassName:"nav__link--selected",children:"Deportivos"}),Object(d.jsx)(l.c,{to:"/category/1",className:"nav__link",activeClassName:"nav__link--selected",children:"Elegantes"}),Object(d.jsx)(q,{})]})]})}),E=(c(69),c(70),function(e){var t=e.stock,c=e.initial,n=e.onAdd,s=e.item,i=Object(a.useState)(c),j=Object(r.a)(i,2),o=j[0],l=j[1];return Object(d.jsxs)("div",{className:"itemCountContainer",children:[Object(d.jsxs)("div",{className:"itemCountControls",children:[Object(d.jsx)("button",{onClick:function(){o>1&&l(o-1)},className:"itemCount__add-button itemCount__add-button--left",children:"-"}),Object(d.jsx)("div",{className:"countDisplay",children:Object(d.jsx)("p",{className:"count",children:o})}),Object(d.jsx)("button",{onClick:function(){o<t?l(o+1):alert("No tenemos m\xe1s stock")},className:"itemCount__add-button itemCount__add-button--right",children:"+"})]}),Object(d.jsx)("button",{className:"itemCount__cart-button",onClick:function(e){n(o,s)},children:"Agregar al carrito"})]})}),L=function(e){var t=e.item,c=Object(a.useState)(0),n=Object(r.a)(c,2),s=n[0],i=n[1],j=Object(a.useContext)(C).addItem;return Object(d.jsxs)("div",{className:"itemDetail",children:[Object(d.jsx)("div",{className:"detail-img__container",children:Object(d.jsx)("div",{className:"detail-img",style:{backgroundImage:"url(/".concat(t.pictureUrl,")")}})}),Object(d.jsxs)("div",{className:"detail-info",children:[Object(d.jsx)("h2",{children:t.title}),Object(d.jsx)("p",{children:t.description}),Object(d.jsxs)("div",{className:"d-flex price-container",children:[Object(d.jsx)("h4",{children:function(e){if(e)return"$ "+e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}(t.price)}),s>=1?Object(d.jsx)(l.b,{to:"/cart",children:Object(d.jsx)("button",{className:"button--terminarCompra",children:"Terminar mi compra"})}):Object(d.jsx)(d.Fragment,{children:" "})]}),Object(d.jsx)(E,{initial:1,stock:5,onAdd:function(e){i(e),j(t,e)}})]})]})},T=(c(71),function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!0),j=Object(r.a)(s,2),o=j[0],l=j[1],b=Object(h.f)().id;return Object(a.useEffect)((function(){var e=f.collection("productos").doc(b);e.get().then((function(e){var t=e.data(),c=Object(i.a)({id:b},t);n(c)})),n(e),setTimeout((function(){l(!1)}),1e3)}),[b]),Object(d.jsx)(O.a,{className:"itemDetailContainer",children:o?Object(d.jsx)(u.a,{animation:"border",role:"status",variant:"secondary",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(d.jsx)(L,{item:c})})}),D=(c(72),c(34)),$=c(35),w=function(){return Object(d.jsx)("footer",{children:Object(d.jsxs)(O.a,{className:"footer",fluid:"xs",children:[Object(d.jsx)("p",{children:"\xa9 Todos los derechos reservados."}),Object(d.jsxs)("div",{className:"footer__links",children:[Object(d.jsx)(D.a,{}),Object(d.jsx)($.b,{className:"mx-2"}),Object(d.jsx)($.a,{})]})]})})},A=(c(73),c(74),function(){var e=Object(a.useContext)(S),t=e.cart,c=e.removeItem,n=Object(a.useState)(!0),s=Object(r.a)(n,2),i=s[0],b=s[1];Object(a.useEffect)((function(){t.length>0?b(!1):b(!0)}),[t.length]);var u=function(e){c(e.currentTarget.value)};return i?Object(d.jsx)("div",{className:"cartEmptyMessage",children:Object(d.jsx)("span",{children:"Ups, parece que no tienes ning\xfan producto en el carrito."})}):Object(d.jsxs)(O.a,{className:"cartSection",children:[Object(d.jsx)("div",{children:t.map((function(e){return Object(d.jsxs)(j.a,{children:[Object(d.jsx)(o.a,{children:Object(d.jsxs)(j.a,{className:"cartItem",children:[Object(d.jsx)(o.a,{xs:2,className:"cartItem__pictureUrl",style:{backgroundImage:"url(/".concat(e.item.pictureUrl,")")}}),Object(d.jsx)(o.a,{xs:2,className:"cartItem__quantity",children:Object(d.jsx)("span",{children:e.quantity})}),Object(d.jsx)(o.a,{className:"cartItem__title",children:Object(d.jsx)("p",{children:e.item.title})}),Object(d.jsx)(o.a,{xs:3,className:"cartItem__price",children:Object(d.jsxs)("span",{children:["$ ",e.item.price]})})]},e.item.id)}),Object(d.jsx)(o.a,{xs:2,className:"cartItem__delete",children:Object(d.jsx)("button",{value:e.item.id,onClick:u,children:Object(d.jsx)(D.b,{})})})]},e.item.id)}))}),Object(d.jsxs)(l.b,{to:"/checkout",children:[" ",Object(d.jsx)("button",{className:"cartSection__checkout",children:"Checkout"})]})]})}),P=c(21),U=(c(75),c(33)),z=function(){var e=Object(a.useContext)(S),t=e.cart,c=e.getTotal,n=e.clear,s=Object(a.useState)({}),b=Object(r.a)(s,2),u=b[0],m=b[1],h=Object(a.useState)(!1),x=Object(r.a)(h,2),p=x[0],v=x[1],g=Object(a.useState)(0),N=Object(r.a)(g,2),_=N[0],y=N[1],C=Object(a.useState)(),k=Object(r.a)(C,2),I=k[0],q=k[1];Object(a.useEffect)((function(){y(c())}),[t]);var F=function(e){var t=e.item;return{id:t.id,title:t.title,price:t.price,quantity:e.quantity}};return Object(d.jsxs)(O.a,{className:"checkoutContainer pb-4",children:[I?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(U.a,{variant:"success",children:[Object(d.jsx)(U.a.Heading,{children:"Muchas gracias por tu compra !"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("p",{className:"mb-0",children:["Tu c\xf3digo de confirmaci\xf3n es: ",I]})]}),Object(d.jsx)(l.b,{to:"/",children:Object(d.jsx)("button",{className:"checkoutItem__empty ms-auto",children:"Seguir comprando"})})," "]}):Object(d.jsx)(d.Fragment,{}),p?Object(d.jsx)(U.a,{variant:"warning",children:Object(d.jsx)(U.a.Heading,{children:"Procesando pedido..."})}):Object(d.jsx)(d.Fragment,{}),t.length>0?Object(d.jsxs)(j.a,{children:[Object(d.jsx)(o.a,{xs:7,className:"checkoutForm",children:Object(d.jsxs)(P.a,{children:[Object(d.jsxs)(P.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(d.jsx)(P.a.Label,{children:"Nombre"}),Object(d.jsx)(P.a.Control,{name:"name",type:"fname",placeholder:"Juan P\xe9rez",onChange:function(e){m(Object(i.a)(Object(i.a)({},u),{},{userName:e.target.value}))},required:!0})]}),Object(d.jsxs)(P.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(d.jsx)(P.a.Label,{children:"Tel\xe9fono"}),Object(d.jsx)(P.a.Control,{name:"telefono",type:"phone",placeholder:"011 9 1111 - 1111",onChange:function(e){m(Object(i.a)(Object(i.a)({},u),{},{userPhone:e.target.value}))}})]}),Object(d.jsxs)(P.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(d.jsx)(P.a.Label,{children:"Correo electr\xf3nico"}),Object(d.jsx)(P.a.Control,{name:"email",type:"email",placeholder:"nombre@ejemplo.com",onChange:function(e){m(Object(i.a)(Object(i.a)({},u),{},{userEmail:e.target.value}))},required:!0})]}),Object(d.jsx)("button",{className:"checkoutForm__confirm",type:"submit",onClick:function(e){e.preventDefault(),v(!0);var c=new Date,a={buyer:u,items:t.map(F),date:c,total:_};f.collection("pedidos").add(a).then(v(!1)).then((function(e){q(e.id)})).then(n()).then(v(!1))},children:"Confirmar"})]})}),Object(d.jsxs)(o.a,{xs:5,className:"checkoutList",children:[t.map((function(e){return Object(d.jsxs)(j.a,{className:"mb-3",children:[Object(d.jsx)(o.a,{xs:2,className:"checkoutItem__quantity",children:Object(d.jsx)("span",{children:e.quantity})}),Object(d.jsx)(o.a,{className:"checkoutItem__title",children:Object(d.jsx)("p",{children:e.item.title})}),Object(d.jsx)(o.a,{xs:3,className:"checkoutItem__price",children:Object(d.jsxs)("span",{children:["$ ",e.item.price]})})]},e.item.id)})),Object(d.jsxs)("h2",{className:"checkoutItem__total",children:["$ ",_]})]})]}):Object(d.jsx)(d.Fragment,{})]})},H=function(){return Object(d.jsx)(I,{children:Object(d.jsxs)(l.a,{children:[Object(d.jsx)(F,{}),Object(d.jsxs)(h.c,{children:[Object(d.jsx)(h.a,{exact:!0,path:"/",component:v}),Object(d.jsx)(h.a,{path:"/category/:id",component:v}),Object(d.jsx)(h.a,{path:"/item/:id",children:Object(d.jsx)(T,{})}),Object(d.jsx)(h.a,{path:"/checkout",component:z}),Object(d.jsx)(h.a,{path:"/cart",component:A})]}),Object(d.jsx)(w,{})]})})};s.a.render(Object(d.jsx)(H,{}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.73fa561b.chunk.js.map